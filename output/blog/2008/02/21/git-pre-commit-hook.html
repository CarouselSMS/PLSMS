<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>ReinH &mdash; Simple Git Continuous Integration</title>
   <meta name="author" content="Rein Henrichs" />
   
   <!-- jQuery JavaScript Framework -->
   <script type="text/javascript" src="http://code.jquery.com/jquery-latest.pack.js"></script>
   
   <!-- Facebox jQuery Plugin -->
   <script src="/javascript/jquery.dimensions.min.js" type="text/javascript"></script>
   <script src="/javascript/jquery.center.js" type="text/javascript"></script>
   <script src="/javascript/jquery.facebox.js" type="text/javascript"></script>
   <link href="/css/facebox.css" media="screen" rel="stylesheet" type="text/css" />

   <!-- Blueprint CSS Framework -->
   <link rel="stylesheet" href="/css/blueprint/screen.css" type="text/css" media="screen, projection" />
   <link rel="stylesheet" href="/css/blueprint/print.css" type="text/css" media="print" />

   <!-- CodeRay syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/coderay.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/site.css" type="text/css" media="screen, projection" />
   
    <!-- OpenID -->
   <link rel="openid.server" href="http://www.myopenid.com/server" />
   <link rel="openid.delegate" href="http://ReinH.myopenid.com/" />
   <meta http-equiv="X-XRDS-Location" content="http://www.myopenid.com/xrds?username=ReinH.myopenid.com" />
   
   <script type="text/javascript" charset="utf-8">
     $(document).ready(function() {
       $('a.fig').facebox();
       $('a.fig').hover(function() {
         $('#' + $(this).attr('title') + ' a').addClass('hover');
       }, function() {
         $('#' + $(this).attr('title') + ' a').removeClass('hover');
       });
     });
   </script>
</head>
<body>

<div class="container" >
  
   <div class="column span-15 first last section" id="header">
     <h1 class="title column span-4 first">
       <a href="/">ReinH<small>.com</small></a>
     </h1>
     <div class="nav">
       <ul>
        <li class="column span-2 append-1"><a href="#about" onClick='document.getElementById("about").setAttribute("style", "background:#FFFFDD")'>About</a></li>
        <li class="column span-2 append-1"><a href="/#recent">Recently</a></li>
        <li class="column span-2 last "><a href="/blog/archive">Archive</a></li>
       </ul>
     </div>
   </div>

   <div class="column span-15 first last">
      
<div class='section hentry entry column span-15 first last'>
  <div class='title-summary'>
    <h2 class='entry-title'><a href="/blog/2008/02/21/git-pre-commit-hook.html">Simple Git Continuous Integration</a></h2>
    <p class="entry-summary">Wherein our hero demonstrates a simple way that git can help you keep your build from breaking.</p>
  </div>    
  <div class='post-info'>
    <abbr class='published' title='Thu Feb 21 16:16:28 -0500 2008'>Feb 21, 2008</abbr>
  </div>
  <div class='entry-content'>
    <p><em>Update:</em> It looks like Chris Wanstrath (of <a href="http://github.com" title="Secure Git hosting and collaborative development &mdash; GitHub">Github</a> fame) <a href="http://ozmm.org/posts/git_post_commit_for_profit.html" title="Git post-commit for profit &mdash; ones zeros majors and minors">beat me to it</a>. Clearly, the git is strong with this one.</p>

<p>Preventing your developers (and yourself) from breaking the build is as simple as putting this in your .git/hooks/pre-commit and making it executable (<code>chmod +x .git/hooks/pre-commit</code>).</p>

<pre><code>#!/bin/sh
rake spec 2&gt; /dev/null
</code></pre>

<p>This will stop the commit if the specs don’t pass.</p>

<p>This isn’t a replacement for a more robust CI system but it does make it a lot harder to do something stupid. Redirecting STDERR to /dev/null is optional but recommended since the STDERR output of failing specs isn’t useful. It you use Test::Unit instead of RSpec (for shame), use rake test instead. Likewise, anything that returns proper error codes (0 for success, > 0 for failure) can be used.</p>

<p>This is mainly useful if your specs take under a minute to run, otherwise it becomes tedious. If you have long-running specs, I suggest using a special task that runs an abridged set of core specs instead.</p>
  </div>
</div>
   </div>

   <div class="column span-15 first last section" id="footer">
     <div class="panel column first">
       <div id="about">
         <h3>About</h3>
         <p>
           Rein Henrichs has been working with Rails since 2005 and is now heavily involved in the Merb, DataMapper, and RSpec communities.
         </p>
         <ul class="info">
           <li><a href="http://feeds.feedburner.com/reinh" rel="alternate" type="application/rss+xml">Subscribe</a>&nbsp;<a href="http://feeds.feedburner.com/reinh" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0;margin:0;padding:0"/></a></li>
           <li><a href="http://twitter.com/reinh">Twitter Me</a></li>
         </ul>
         <a class="extra-quiet plain top-link" href='#header' onClick='document.getElementById("about").setAttribute("style", "background:#FFFFFF")'>[top]</a>
       </div>
     </div>
     <div class="panel column plain">
      <h3>People I Read</h3>
      <ul class='no-bullet'>
  <li><a href='http://slash7.com/' title='Slash 7 with Amy Hoy'>Amy Hoy</a></li>
  <li><a href='http://www.zachinglis.com' title='ZachInglis.com'>Zach Inglis</a></li>
  <li><a href='http://www.tpope.net/' title='tpope.net | I wish that you were x squared and I was 2x'>Tim Pope</a></li>
  <li><a href='http://ozmm.org/' title='ones zeros majors and minors'>Chris Wanstrath</a></li>
  <li><a href='http://blog.evanweaver.com/' title='home :: snax'>Evan Weaver</a></li>
  <li><a href='http://drnicwilliams.com/' title='Dr Nic'>Dr Nic Williams</a></li>
  <li><a href='http://www.codefluency.com' title='Codefluency: Home Page'>Bruce Williams</a></li>
</ul>

     </div>
     <div class="panel column last plain">
       
       
         <h3 id="footer-recent">Recently</h3>
         <dl class="posts">
         
           <dt>July 2008</dt>
              
                <dd><a href="/blog/2008/07/11/90-percent-of-all-awesome-people-use-webby.html">90% of All Awesome People Use Webby!</a></dd>
              
         
           <dt>February 2008</dt>
              
                <dd><a href="/blog/2008/02/25/to-design-a-blog.html">To Design A Blog (act 1)</a></dd>
              
                <dd><a href="/blog/2008/02/26/to-design-a-blog-2.html">To Design A Blog (act 2)</a></dd>
              
                <dd><a href="/blog/2008/02/21/git-pre-commit-hook.html">Simple Git Continuous Integration</a></dd>
              
                <dd><a href="/blog/2008/02/19/git-it-got-it-good.html">Git It, Got It? Good!</a></dd>
              
         
         </dl>
       
     </div>
     <!-- <a class='extra-quiet plain top-link' href='#header'>[top]</a> -->
   </div>
   <div class="column span-15 first last" id="copyright">
     <ul class="info extra-quiet" style="padding:0;margin:0;">
      <li style="float:left;">
        Created with <a href="http://webby.rubyforge.org">Webby</a>     
      </li>
      <li style="float:right; text-align:right;">
        All design &amp; content Copyright Rein Henrichs 2008
      </li>
     </ul>
   </div>
     
</div>
<script type="text/javascript" charset="utf-8">
  if (window.location.hash == "#about") {document.getElementById("about").setAttribute('style', 'background:#FFFFDD')};
</script>
</body>
</html>
